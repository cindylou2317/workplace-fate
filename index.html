<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Compliance Cemetery</title>
<meta name="description" content="Scan, type your name on the headstone, and receive a spooky, HR-friendly compliance epitaph." />
<style>
  :root{
    --sky-top:#0b1220;
    --sky-bottom:#1a243b;
    --moon:#e6edf7;
    --fog:rgba(255,255,255,0.05);
    --stone:#c9cfd9;
    --stone-dark:#9aa3b2;
    --arch:#cfd6e2;
    --arch-shadow:#9aa3b2;
    --text:#eaf0f8;
    --muted:#b9c4d6;
    --btn:#3b82f6;
    --btn-dark:#1f2937;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    color:var(--text);
    font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,"Helvetica Neue",Arial;
    background:
      radial-gradient(140px 140px at 20% 18%, var(--moon) 0 35%, transparent 36%),
      linear-gradient(0deg, var(--sky-bottom), var(--sky-top));
    overflow-x:hidden;
  }

  .scene{
    position:relative;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:64px 20px 100px;
    isolation:isolate;
  }

  .hills, .hills:before, .hills:after{
    content:"";
    position:absolute;
    left:-10vw; right:-10vw;
    height:35vh;
    bottom:0;
    background:
      radial-gradient(120vw 40vh at 20% 100%, #0a0f1c 50%, transparent 51%),
      radial-gradient(120vw 40vh at 80% 100%, #0a0f1c 50%, transparent 51%),
      radial-gradient(160vw 50vh at 50% 100%, #0b1322 52%, transparent 53%);
    z-index:-2;
    filter:blur(1px);
  }
  .hills:before{ bottom:6vh; opacity:.8; filter:blur(2px); }
  .hills:after{ bottom:12vh; opacity:.6; filter:blur(3px); }

  .fog{
    position:absolute; inset:0;
    background:
      radial-gradient(60% 30% at 50% 70%, var(--fog), transparent 70%),
      radial-gradient(50% 25% at 30% 80%, var(--fog), transparent 70%),
      radial-gradient(50% 25% at 70% 85%, var(--fog), transparent 70%);
    mix-blend-mode:screen;
    animation:fogmove 18s linear infinite alternate;
    z-index:-1;
  }
  @keyframes fogmove{
    0%{transform:translateX(-2%) translateY(0)}
    100%{transform:translateX(2%) translateY(1%)}
  }

  .bat{
    position:absolute;
    width:28px; height:12px;
    background:linear-gradient(90deg, transparent 35%, #111 35% 65%, transparent 65%);
    top:16vh; left:-5vw;
    opacity:.8;
    animation:fly 16s linear infinite;
  }
  .bat:before, .bat:after{
    content:"";
    position:absolute; top:0;
    width:14px; height:12px; background:#111;
    border-radius:0 100% 0 100% / 0 100% 0 100%;
    transform-origin: right center;
    animation:flap .3s ease-in-out infinite;
  }
  .bat:before{ left:-14px; transform-origin:left center; border-radius:100% 0 100% 0 / 100% 0 100% 0; }
  .bat:after{ right:-14px; }
  @keyframes flap{
    0%,100%{transform:rotate(12deg)}
    50%{transform:rotate(-22deg)}
  }
  @keyframes fly{
    0%{ transform:translateX(0) translateY(0) scale(1) }
    50%{ transform:translateX(60vw) translateY(-6vh) scale(1.1) }
    100%{ transform:translateX(120vw) translateY(2vh) scale(1) }
  }
  .bat.b2{ top:22vh; animation-duration:18s; animation-delay:2s; opacity:.7; }
  .bat.b3{ top:28vh; animation-duration:20s; animation-delay:5s; opacity:.6; }
  .bat.b4{ top:14vh; animation-duration:22s; animation-delay:7s; opacity:.5; }

  .arch-wrap{
    position:absolute; top:18px; left:50%; transform:translateX(-50%);
    width:min(1000px, 94vw);
    pointer-events:none;
    filter: drop-shadow(0 12px 24px rgba(0,0,0,.5));
  }
  .arch-text{
    position:absolute; inset:0;
    display:flex; align-items:flex-start; justify-content:center;
    padding-top: clamp(28px, 7vw, 64px);
    font-family:"Cinzel","Trajan Pro",Georgia,serif;
    letter-spacing:.22em; font-weight:900; color:#eef3fb;
    text-shadow:0 2px 0 #9aa6b8, 0 6px 18px rgba(0,0,0,.6);
    font-size: clamp(18px, 3.2vw, 36px);
  }

  .card{
    width:min(980px, 96vw);
    display:grid; grid-template-columns: 1.2fr .8fr; gap:18px;
    padding:18px;
    background: linear-gradient(180deg, rgba(14,20,34,.85), rgba(10,15,25,.85));
    border:1px solid rgba(255,255,255,.06);
    border-radius:18px;
    box-shadow: 0 12px 40px rgba(0,0,0,.5);
    backdrop-filter: blur(6px);
  }
  @media (max-width: 860px){ .card{ grid-template-columns:1fr; gap:14px; } }

  .stone{
    position:relative;
    background: radial-gradient(120% 140% at 50% 0%, var(--stone) 0 60%, var(--stone-dark) 75%);
    border-radius: 18px 18px 8px 8px;
    padding: 20px 16px 18px;
    border: 2px solid rgba(0,0,0,.25);
    box-shadow: inset 0 2px 0 rgba(255,255,255,.35), 0 10px 16px rgba(0,0,0,.4);
    overflow:hidden;
  }
  .stone:before{
    content:"";
    position:absolute; left:50%; top:-40%;
    width: 160%; height: 120%;
    transform: translateX(-50%);
    border-radius: 999px 999px 0 0 / 100% 100% 0 0;
    background: radial-gradient(120% 120% at 50% 20%, #e2e7ef 0 45%, #c6cdd8 60%, transparent 61%);
    opacity:.25; pointer-events:none;
  }
  .stone h2{
    font-family: "Cinzel", Georgia, serif;
    margin:8px 0 6px; color:#222a38;
    text-shadow: 0 1px 0 rgba(255,255,255,.4);
    letter-spacing:.05em;
  }
  .stone small{color:#2d3748}

  label{display:block; font-size:.9rem; color:#2d3a4d; margin:10px 0 6px}
  .input{
    display:block; width:100%;
    padding:14px 12px;
    border-radius:10px;
    border:1.5px solid #6d7b90;
    background: linear-gradient(180deg, #f0f3f9, #e1e6ef);
    color:#0d1524; font-size:1.05rem; font-weight:700;
    text-transform:capitalize; letter-spacing:.03em;
    box-shadow: inset 0 2px 0 rgba(255,255,255,.6);
  }
  .input::placeholder{color:#6b7280; font-weight:500}
  .controls{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
  .btn{
    appearance:none; border:0; cursor:pointer;
    padding:12px 14px; border-radius:10px; font-weight:700;
    transition:transform .05s ease, box-shadow .2s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,.25);
    background:var(--btn); color:white;
  }
  .btn:active{transform:translateY(1px)}
  .btn.secondary{background:var(--btn-dark); color:#e5e7eb}
  .select{
    width:100%; padding:10px 10px; border-radius:10px; border:1.5px solid #5f6c81;
    background:#111827; color:#e5edf7;
  }

  /* updated result box and text */
  .result{
    padding:16px; border-radius:14px;
    background: #f3f6fb;                 /* lighter background */
    border:1px solid rgba(0,0,0,.08);
    min-height:120px;
  }
  .fate-text{
    color:#0b1322;
    font-weight:800;
    font-size:1.15rem;
    line-height:1.35;
  }

  .muted{color:var(--muted); font-size:.92rem}
  .tiny{font-size:.82rem; color:#8ea0b8}

  .panel{
    background: rgba(255,255,255,.035);
    border:1px solid rgba(255,255,255,.06);
    border-radius:14px; padding:16px;
  }
  .panel h3{ margin:0 0 10px; font-family:"Cinzel", Georgia, serif; letter-spacing:.03em; }

  :focus-visible{outline:2px dashed #a5b4fc; outline-offset:3px}

  .audio-row{ display:flex; gap:10px; margin-top:10px; align-items:center; }
</style>
</head>
<body>
  <div class="scene" role="application" aria-labelledby="title">
    <div class="hills" aria-hidden="true"></div>
    <div class="fog" aria-hidden="true"></div>
    <div class="bat"></div><div class="bat b2"></div><div class="bat b3"></div><div class="bat b4"></div>

    <div class="arch-wrap" aria-hidden="true">
      <svg viewBox="0 0 1200 260" width="100%" role="img" aria-label="Stone arch">
        <defs>
          <linearGradient id="archGrad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#d8dee9"/>
            <stop offset="100%" stop-color="#b3bccb"/>
          </linearGradient>
          <filter id="archShadow" x="-10%" y="-10%" width="120%" height="140%">
            <feDropShadow dx="0" dy="8" stdDeviation="8" flood-color="rgba(0,0,0,0.55)"/>
          </filter>
        </defs>
        <path d="M80,240 L1120,240 L1120,180 A520,520 0 0,0 80,180 Z"
              fill="url(#archGrad)" stroke="#d2dae6" stroke-width="10" filter="url(#archShadow)"/>
        <path d="M130,200 A470,470 0 0,1 1070,200" fill="none" stroke="#9aa3b2" stroke-width="3" opacity=".7"/>
        <path d="M100,220 A500,500 0 0,1 1100,220" fill="none" stroke="#9aa3b2" stroke-width="3" opacity=".5"/>
      </svg>
      <div class="arch-text" id="title">COMPLIANCE CEMETERY</div>
    </div>

    <div class="card">
      <section class="stone">
        <h2>Here Liesâ€¦</h2>
        <small class="tiny">Type a name to etch on the stone.</small>
        <label for="name">Name on the headstone</label>
        <input id="name" class="input" type="text" placeholder="e.g., Pat Morgan" autocomplete="name" />
        <label for="category" style="margin-top:12px">Choose a theme (optional)</label>
        <select id="category" class="select">
          <option value="any">Surprise me (any theme)</option>
          <option value="Office">Office & Conduct</option>
          <option value="Security">Cybersecurity & IT</option>
          <option value="FCC">Telecom & FCC</option>
          <option value="CPNI">CPNI & Privacy</option>
          <option value="OFAC">Sanctions / OFAC</option>
          <option value="Contract">Contracts & Deal Docs</option>
        </select>
        <div class="controls">
          <button id="reveal" class="btn">Reveal My Fate</button>
          <button id="again" class="btn secondary">Try Again</button>
          <button id="copy" class="btn secondary">Copy</button>
          <button id="tweet" class="btn secondary">Tweet</button>
        </div>
        <div class="audio-row">
          <button id="audioToggle" class="btn secondary">Play Ambience</button>
          <span class="tiny">Optional: gentle wind, creaks, and crows (no autoplay).</span>
        </div>
        <div id="result" class="result" style="margin-top:12px" aria-live="polite"></div>
        <div class="tiny" style="margin-top:8px">This is for laughs only. Keep it kind. No real predictions, no bullying.</div>
      </section>

      <aside class="panel">
        <h3>Welcome, Traveler</h3>
        <p class="muted">Scan the QR, type your name into the headstone, and behold a playful epitaph about workplace mischief â€” non-graphic and HR-friendly.</p>
        <ul class="tiny" style="margin-top:10px;line-height:1.5">
          <li>Names stay local â€” nothing is stored.</li>
          <li>Pick a theme or let fate decide.</li>
          <li>Prefer silence? Leave ambience off.</li>
        </ul>
      </aside>
    </div>
  </div>

<audio id="ambience" loop preload="auto"></audio>

<script>
const FATES = []; // (Your 44-item array here â€” unchanged from before)

const $ = s => document.querySelector(s);
function pickFate(cat){
  const pool = cat==="any"?FATES:FATES.filter(f=>f.category===cat);
  return pool[Math.floor(Math.random()*pool.length)];
}
function sanitize(s){return String(s).replace(/[<>]/g,'');}

const nameInput=$("#name"),catSel=$("#category"),btnReveal=$("#reveal"),btnAgain=$("#again"),
btnCopy=$("#copy"),btnTweet=$("#tweet"),result=$("#result");

function renderFate(){
  const name=sanitize(nameInput.value.trim()||"Somebody"),
        cat=catSel.value,
        f=pickFate(cat);
  const txt=f.text.replaceAll("{name}",name);
  result.innerHTML=`<strong>${name}:</strong> <span class="fate-text">${txt}</span>
  <div class="tiny" style="margin-top:8px">Theme: ${f.category}</div>`;
}
btnReveal.onclick=renderFate;
btnAgain.onclick=()=>{renderFate();nameInput.focus();};
btnCopy.onclick=async()=>{
  try{await navigator.clipboard.writeText(result.innerText.trim());
      btnCopy.textContent="Copied!";setTimeout(()=>btnCopy.textContent="Copy",1200);}
  catch{btnCopy.textContent="Couldnâ€™t copy";setTimeout(()=>btnCopy.textContent="Copy",1200);}
};
btnTweet.onclick=()=>{
  const t=encodeURIComponent(result.innerText.trim()||"My spooky compliance fate!");
  window.open(`https://twitter.com/intent/tweet?text=${t}`,"_blank","noopener");
};
nameInput.onkeydown=e=>{if(e.key==="Enter")renderFate();};
setTimeout(()=>{if(!result.innerText.trim())renderFate();},400);

/* Ambience */
const audio=document.getElementById("ambience");
const audioToggle=document.getElementById("audioToggle");
let loaded=false;
const src="ambience.mp3";
fetch(src,{method:"HEAD"}).then(r=>{if(r.ok){audio.src=src;loaded=true;}}).catch(()=>{});
audioToggle.onclick=async()=>{
  if(!loaded){audioToggle.textContent="No Audio Found";setTimeout(()=>audioToggle.textContent="Play Ambience",1200);return;}
  if(audio.paused
